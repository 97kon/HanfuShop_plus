<!doctype html>
<html class="no-js" lang="en">

<head th:replace="home/public/header::head(~{::title},~{},~{})">
    <title>商品详情-云裳·汉服商城</title>
</head>
<link rel="stylesheet" href="/static/common/plugs/layui/css/layui.css">
<body>
<style type="text/css">
    .single-image.border img {
        width: 100%;
        height: 450px;
    }
    .single-thumb.border img {
        height: 120px;
    }

    .single-product-main-area .tab-content {
        padding: 2px;
        background: white;
    }

    .breadcrumbs-area {
        padding: 100px 0;
        background: #f6f6f6 url(/static/common/images/hanfu4.jpeg) no-repeat scroll center center/cover;
    }
    .mybuybtn{
        background-color: #e4393c;
    }
    .obrien-button-3.black-button {
        background-color: #e4393c;
        width: 335px;
    }
    .obrien-button-3.black-button:hover{
        /*font-size: 1.5rem;*/
        color: whitesmoke;
        background-color: #f5282b;
    }
    .btn.obrien-button.primary-btn:hover{
        background-color: #e4393c;
        color: white;
    }
    .single-product-main-area .nav-tabs .nav-item .nav-link.active{
        background-color: #e4393c;
        border-color: #e4393c;
    }
    @media (min-width: 1200px){
        .col-xl-20 {
            flex: 0 0 auto;
            width: 20%;
        }
    }
    @media (min-width: 1800px){
        .col-xl-16 {
            flex: 0 0 auto;
            width: 16.666667%;
        }
    }
    .product-area .single-product .product-content {
        background-color: #efedee;
        padding: 0 5px 20px;
    }
    .product-image {
        border: 1px solid #efedee;
    }
    .multi-line2 {
        min-height: 52px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        text-overflow: clip;
        overflow: hidden;
        font-size: 1rem;
        line-height: 26px;
    }
    div.desc-content div,img,vieo{
        max-width: 100%;
    }
    input[type="checkbox"] {
         display: inline-block;
    }
    .parameter2,.p-parameter-list{
        display: flex;
        width: 100%;
        flex-wrap: wrap;
    }
    .parameter2,.p-parameter-list li{
        margin: 5px 10px;
    }
    .clothSpan{
        padding: 5px;
        margin: 0 5px;
        border: 1px solid #abaaaa;
        cursor: pointer;
    }
    span.active {
        background-color: #00a0e9;
        color: white;
    }
    .detail-content-wrap{
        width: 100%;
        display: flex;
        justify-content: center;
    }
</style>

    <div class="shop-wrapper">

        <!-- Header Area Start Here -->
        <div th:replace="home/public/header::headmenu"></div>
        <!-- Header Area End Here -->

        <!-- Breadcrumb Area Start Here -->
        <div class="breadcrumbs-area position-relative">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="breadcrumb-content position-relative section-content">
                            <h3 class="title-3">商品详情</h3>
                            <ul>
                                <li><a href="/home/index">首页</a></li>
                                <li>商品详情</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breadcrumb Area End Here -->
        <!-- Single Product Main Area Start -->
        <div class="single-product-main-area">
            <div class="container container-default custom-area">
                <div class="row">
                    <div class="col-lg-5 col-custom">
                        <div class="product-details-img horizontal-tab">
                            <div class="product-slider popup-gallery product-details_slider" data-slick-options='{
                        "slidesToShow": 1,
                        "arrows": false,
                        "fade": true,
                        "draggable": false,
                        "swipe": false,
                        "asNavFor": ".pd-slider-nav"
                        }'>
                                <div class="single-image border" th:if="${goods.goodsPic1==null||goods.goodsPic1==''}">
                                    <a href="#">
                                        <img src="/static/common/images/nopic.jpg" alt="Product">
                                    </a>
                                </div>
                                <div class="single-image border">
                                    <a href="#">
                                        <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic1}}" alt="Product">
                                    </a>
                                </div>
                                <div class="single-image border">
                                    <a href="#">
                                        <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic2}}" alt="Product">
                                    </a>
                                </div>
                                <div class="single-image border">
                                    <a href="#">
                                        <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic3}}" alt="Product">
                                    </a>
                                </div>
                                <div class="single-image border">
                                    <a href="#">
                                        <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic4}}" alt="Product">
                                    </a>
                                </div>
                                <div class="single-image border">
                                    <a href="#">
                                        <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic5}}" alt="Product">
                                    </a>
                                </div>

                            </div>
                            <div class="pd-slider-nav product-slider" data-slick-options='{
                        "slidesToShow": 4,
                        "asNavFor": ".product-details_slider",
                        "focusOnSelect": true,
                        "arrows" : false,
                        "spaceBetween": 30,
                        "vertical" : false
                        }' data-slick-responsive='[
                            {"breakpoint":1501, "settings": {"slidesToShow": 4}},
                            {"breakpoint":1200, "settings": {"slidesToShow": 4}},
                            {"breakpoint":992, "settings": {"slidesToShow": 4}},
                            {"breakpoint":575, "settings": {"slidesToShow": 3}}
                        ]'>
                                <div class="single-thumb border" th:if="${goods.goodsPic1==null||goods.goodsPic1==''}">
                                    <img src="/static/common/images/nopic.jpg" alt="Product Thumnail">
                                </div>

                                <div class="single-thumb border" th:if="${goods.goodsPic1}">
                                    <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic1}}" alt="Product Thumnail">
                                </div>
                                <div class="single-thumb border" th:if="${goods.goodsPic2}">
                                    <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic2}}" alt="Product Thumnail">
                                </div>
                                <div class="single-thumb border" th:if="${goods.goodsPic3}">
                                    <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic3}}" alt="Product Thumnail">
                                </div>
                                <div class="single-thumb border" th:if="${goods.goodsPic4}">
                                    <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic4}}" alt="Product Thumnail">
                                </div>
                                <div class="single-thumb border" th:if="${goods.goodsPic5}">
                                    <img th:src="@{${'/file/fileDown?saveName='+goods.goodsPic5}}" alt="Product Thumnail">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-7 col-custom">
                        <div class="product-summery position-relative">
                            <div class="product-head mb-3">
                                <h2 class="product-title">
                                    [[${goods.name}]]
                                    <span style="height: 45px;line-height: 45px;font-size: 30px;float:right;cursor: pointer" th:onclick="addCollect()">
                                        <i class="layui-icon layui-icon-star-fill" style="font-size: 30px"></i>
                                    </span>
                                </h2>
                                <p style="color: red" class="mt-4">[[${goods.tags}]]</p>
                            </div>
                            <div class="price-box mb-4">
                                <span class="regular-price" style="color: #e4393c">[['价格：'+${goods.price}]]</span>
                                <span>70%是押金，30%是租赁单价.第二天起每件衣服租赁费用只要10元</span>
                            </div>
                            <div class="sku mb-4" >
                                <!--<span>剩余库存: [[${goods.stock}]]</span>-->
                                <span>累计销量: [[${goods.saleNumber}]]</span>
                            </div>
                            <div class="product-rating mb-4">
                                <span>分类: [[${goods.categoryName}]]</span>
                            </div>
                            <div class="sku mb-4">
                                <span>商品二级分类: [[${goods.secondCName}]]</span>
                            </div>
                            <div class="sku" style="margin-bottom: 20px">
                                <span>商品尺码: </span>
                                <span class="clothSpan" th:each="object :${clothSize}" th:data="${object}" th:value="${object}">[[${object}]]</span>
                            </div>
                            <div class="sku mb-4" >
                                <span>租赁截止日期: </span>
                                <input type="text" name="rentDay" class="layui-input-inline layui-input" style="width: 300px;display: inline-block" id="rentDay"  placeholder="请选择租赁截止日期" />
                            </div>


<!--                            <div class="sku" style="margin-bottom: 20px">-->
<!--                                <span>-->
<!--                                    <input type="checkbox" name="ifSend" id="ifSend"  title="是否到店自提"/>-->
<!--                                    <span>是否到店自提</span>-->
<!--    &lt;!&ndash;                                <span style="color: grey">(提供预约服务，需要预约的可以在订单备注说明哦)</span>&ndash;&gt;-->
<!--                                </span>-->
<!--                                <span>-->
<!--                                    <input type="checkbox" name="ifSend" id="ifSend"  title="是否需要预约化妆"/>-->
<!--                                    <span>是否需要预约化妆</span>-->
<!--                                </span>-->
<!--                                <span>-->
<!--                                    <input type="checkbox" name="ifSend" id="ifSend"  title="是否需要预约拍照"/>-->
<!--                                    <span>是否需要预约拍照</span>-->
<!--                                </span>-->
<!--&lt;!&ndash;                            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                            <div class="sku" style="margin-bottom: 20px">&ndash;&gt;-->
<!--&lt;!&ndash;                                <input type="checkbox" name="ifSend" id="ifSend"  title="是否到店自提"/>&ndash;&gt;-->
<!--&lt;!&ndash;                                <span>是否需要预约化妆与拍照</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                <span style="color: grey">(提供预约服务，需要预约的可以在订单备注说明哦)</span>&ndash;&gt;-->
<!--                            </div>-->
                            <div class="quantity-with_btn mb-4" >

                                <div class="quantity">
                                    <div class="cart-plus-minus">
                                        <input class="cart-plus-minus-box" value="1"  type="number" id="number">
                                        <div class="dec qtybutton">-</div>
                                        <div class="inc qtybutton">+</div>
                                    </div>
                                </div>
                                <div class="add-to_cart" >
                                    <a class="btn obrien-button primary-btn" href="javascript:;"  th:onclick="addCart([[${goods.id}]])">添加购物车</a>
                                </div>
                            </div>
                            <div class="buy-button mb-5 mt-5">
                                <a href="javascript:;" th:onclick="immediateOrder([[${goods.id}]])" class="btn obrien-button-3 black-button mybuybtn">立即购买</a>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row mt-no-text" id="app">
                    <div class="col-lg-12">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active text-uppercase text-left" @click="showDetail"  id="home-tab" data-toggle="tab" href="#connect-1" role="tab" aria-selected="true">商品详情</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link  text-uppercase text-left" @click="showAppraise" id="home-tab" data-toggle="tab" href="#connect-2" role="tab" >商品评论</a>
                            </li>

                        </ul>
                        <div class="tab-content mb-text" id="myTabContent">
                            <div :class="detailClass" id="connect-1" role="tabpanel" aria-labelledby="home-tab">
<!--                            <div class="tab-pane fade show active" id="connect-1" role="tabpanel" aria-labelledby="home-tab">-->
                                <div class="desc-content" >
                                    <!--<p style="font-size: 16px;font-weight: bold; width: 100%;text-align: left">商品参数</p>-->
                                    <div style="display: flex;font-size: 16px;justify-content: space-between;align-items: center;margin: 5px 0;padding: 20px;background-color: rgba(229,229,229,0.85)">
                                        <span>名称：<span> [[${goods.name}]]</span></span>
                                        <span>定价：<span> [[${goods.price}]]</span></span>
                                        <span>一级分类：<span> [[${goods.categoryName}]]</span></span>
                                        <span>二级分类：<span> [[${goods.secondCName}]]</span></span>
                                        <span>销量：<span> [[${goods.saleNumber}]]</span></span>
                                        <span>库存：<span> [[${goods.stock}]]</span></span>
                                    </div>
                                </div>
                                <div class="desc-content" th:utext="${goods.content}">
                                </div>
                            </div>

<!--                            <div :class="appraiseClass" id="connect-2" role="tabpanel" aria-labelledby="home-tab">-->
<!--                                <div>商品评论</div>-->

<!--                            </div>-->
                        </div>
                    </div>
                    <div class="tab-content mb-text" id="myTabContent">

                        <div :class="appraiseClass" id="connect-2" role="tabpanel" aria-labelledby="home-tab">
                            <p style="font-size: 16px;margin: 10px 0">商品评论({{total}})条</p>
                            <ul>
                                <li v-for="item in commentList" style="display: flex;flex-direction: row;align-items: flex-start;width: 100%;padding-bottom: 10px;margin-bottom: 10px;border-bottom: 1px solid rgba(222,218,218,0.38)">
                                    <div style="width: 120px;flex-shrink: 0">
                                        <img :src="'/file/fileDown?saveName='+item.userImg" style="width: 100px;height: 100px;border-radius: 50%;">
                                    </div>

                                    <div style="width: 100%;">
                                        <div style="font-size: 14px;margin-bottom: 10px;width: 100%">
                                            <span>{{item.userName}}</span>
                                            <span style="float: right">{{item.createTime}}</span>
                                        </div>
                                        <div style="margin-bottom: 5px">{{item.content}}</div>
                                        <div style="width: 100%;display: flex;flex-direction: row;flex-wrap: wrap;align-items: center">
                                            <img :src="iteminner" v-for="iteminner in item.image.split(',')" style="width: 100px;height: 100px;margin: 5px;cursor: pointer" @click="showImage(iteminner)">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <div class="layui-row text-center" v-if="total>0">
                                <div id="laypage"></div>
                            </div>

                        </div>
                    </div>


                </div>
            </div>
        </div>
        <!-- Single Product Main Area End -->

        <!-- Product Area Start Here -->
        <div class="product-area mb-no-text">
            <div class="container container-default custom-area">
                <div class="row">
                    <div class="col-lg-5 m-auto text-center col-custom">
                        <div class="section-content">
                            <h2 class="title-1 text-uppercase">您可能还喜欢</h2>
                            <div class="desc-content">
                                <p>大多数客户选择我们的产品,你也可能喜欢我们的产品。</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 product-wrapper col-custom" style="display: flex;flex-wrap: nowrap;overflow-x: hidden;">
                            <div class="single-item col-xl-16 col-xl-20 col-lg-3 col-md-3 col-sm-3" th:each="item : ${hotList}">
                                <div class="single-product position-relative">
                                    <div class="product-image">
                                        <a class="d-block" th:href="@{/home/goods/detail/}+${item.id}">
                                            <img style="height: 200px"  th:src="@{${'/file/fileDown?saveName='+item.goodsPic1}}" alt="" class="product-image-1 w-100">
                                            <img style="height: 200px"  th:src="@{${'/file/fileDown?saveName='+item.goodsPic1}}" alt="" class="product-image-2 position-absolute w-100">
                                        </a>
                                    </div>
                                    <div class="product-content">
                                        <div  style="font-size: 1.2rem;color: #e4393c">
                                            <span class="regular-price ">￥[[${item.price}]]</span>
                                        </div>
                                        <div class="product-title" style="margin-bottom: 0">
                                            <p class="title-2 multi-line2">[[${item.name}]]</p>
                                        </div>
<!--                                        <div  style="display: flex;justify-content: space-between;">-->
<!--                                            <a href="javascript:;" th:onclick="addCart([[${item.id}]],1)" title="添加购物车" style="margin-right: 15px">-->
<!--                                                <i class="ion-bag" style="font-style: normal;">添加购物车</i>-->
<!--                                            </a>-->
<!--                                            <a href="javascript:;" th:onclick="immediateOrder([[${item.id}]],1)" title="立即购买">-->
<!--                                                <i class="ion-eye" style="font-style: normal;">立即购买</i>-->
<!--                                            </a>-->
<!--                                        </div>-->
                                    </div>



                                    <!--<div class="product-content">-->
                                        <!--<div class="product-title">-->
                                            <!--<p class="title-2 multi-line2">-->
                                                <!--[[${item.name}]]-->
                                            <!--</p>-->
                                            <!--&lt;!&ndash;<h4 class="title-2"> <a th:href="@{/home/goods/detail/}+${item.id}">[[${item.name}]]</a></h4>&ndash;&gt;-->
                                        <!--</div>-->
                                        <!--<div class="price-box">-->
                                            <!--<span class="regular-price ">￥[[${item.discount}]]</span>-->
                                            <!--<span class="old-price"><del>￥[[${item.price}]]</del></span>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <!--<div class="add-action d-flex position-absolute">-->
                                        <!--<a href="javascript:;" th:onclick="addCart([[${item.id}]])" title="添加购物车">-->
                                            <!--<i class="ion-bag"></i>-->
                                        <!--</a>-->
                                    <!--</div>-->
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>


    </div>


<!-- Footer Area Start Here -->
<footer th:replace="home/public/footer::footer"></footer>
<!-- Footer Area End Here -->

    <!-- Scroll to Top Start -->
    <a class="scroll-to-top" href="#">
        <i class="ion-chevron-up"></i>
    </a>
    <!-- Scroll to Top End -->

    <!-- JS
============================================ -->

    <!-- jQuery JS -->
    <script src="/static/assets/js/vendor/jquery-3.5.1.min.js"></script>
    <!-- jQuery Migrate JS -->
    <script src="/static/assets/js/vendor/jQuery-migrate-3.3.0.min.js"></script>
    <!-- Modernizer JS -->
    <script src="/static/assets/js/vendor/modernizr-2.8.3.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="/static/assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!-- Slick Slider JS -->
    <script src="/static/assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="/static/assets/js/plugins/jquery.countdown.min.js"></script>
    <!-- Ajax JS -->
    <script src="/static/assets/js/plugins/jquery.ajaxchimp.min.js"></script>
    <!-- Jquery Nice Select JS -->
    <script src="/static/assets/js/plugins/jquery.nice-select.min.js"></script>
    <!-- Jquery Ui JS -->
    <script src="/static/assets/js/plugins/jquery-ui.min.js"></script>
    <!-- jquery magnific popup js -->
    <script src="/static/assets/js/plugins/jquery.magnific-popup.min.js"></script>

    <!-- Main JS -->
    <script src="/static/assets/js/main.js"></script>
<script src="/static/home/cart/js/vue2.min.js"></script>
<script src="/static/home/cart/js/vue-resource.min.js"></script>
<script type="text/javascript">
    var currClothSize="";
    var userId='[[${session?.user?.id}]]';
    var goodsId='[[${goodsId}]]';
    var that=this
    var vm = new Vue({
        el:'#app' , // 构造参数，实例需要监听的模型范围，对象 #app 下的任何元素都可以背vue操控
        data:{      // data 重点 vue的模型
            detailClass:"tab-pane fade show active",
            appraiseClass:"tab-pane fade ",
            total:0,//评论数量
            commentList:[],
            pageIndex:1,
            pageSize:6,
            initLayui:false,
        },
        filters:{ // 过滤器 对数据实现转换 可以定义全局的 也可以定义局部的 这个是局部的 只有vue的实例才可以使用

        },
        created(){

        },
        watch: {//监听data中的数据变化
            'initLayui': function (newVal) {
                if (newVal)
                    console.log("initlayui newvalue : ",newVal)
                    that.initLayui();
            }
        },
        methods:{   // 所有事件的绑定都会在 methods 中定义
            showAppraise(){
                this.appraiseClass="tab-pane fade show active"
                this.detailClass="tab-pane fade "
            },

            showDetail(){
                this.detailClass="tab-pane fade show active"
                this.appraiseClass="tab-pane fade "
            },
            showImage(src){
                layer.open({
                    title: "图片",
                    offset: ['25%', '25%'],
                    type: 1,
                    area: ['auto', '65%'], //宽高
                    shadeClose: true,//点击遮罩关闭
                    content: "<img style='height: 100%;' src='" + src + "'/>"
                });
            }
        }
    });

    function initLayui() {
        layui.use(['laydate','laypage'], function () {
            var laypage = layui.laypage,
                laydate = layui.laydate;

            laydate.render({
                elem: '#rentDay',
                type: 'date',
                trigger:'click'
                ,min: 1
                ,max: 31
                ,done: function(value, date, endDate) {
                    // searchList();
                }
            });
            //执行一个laypage实例
            laypage.render({
                elem: 'laypage' //注意，这里的 test1 是 ID，不用加 # 号
                , count: vm.$data.total //数据总数，从服务端得到
                ,theme: '#FF5722'
                ,groups:7  // 连续出现的页码个数 默认值5
                ,curr: vm.$data.pageIndex
                ,skip:true
                , limit: vm.$data.pageSize //每页显示的条数。laypage将会借助 count 和 limit 计算出分页数。
                , limits: [ 6,8, 10] //每页条数的选择项。如果 layout 参数开启了 limit，则会出现每页条数的select选择框
                , layout: ['count', 'prev', 'page', 'next', 'limit', 'skip']
                , jump: function (obj, first) {
                    //obj包含了当前分页的所有参数，比如：
                    vm.$data.pageSize = obj.limit;
                    vm.$data.pageIndex = obj.curr;
                    //首次不执行
                    if (!first) {
                        pagination(obj.curr, obj.limit);
                    }
                }
            });
        });
    }


    function pagination() {
        var requestPath = "/home/goodsAppraise/list/?pageNum=" + vm.$data.pageIndex + "&pageSize=" + vm.$data.pageSize;
        $.post(requestPath,{"goodsId":goodsId} ,function (res) {
            vm.$data.total = res.data.total;
            vm.$data.commentList = res.data.rows;
            vm.$data.initLayui = new Date();
        });
    }

    pagination(vm.$data.pageIndex,vm.$data.pageSize)


    $(function (){
        $(".clothSpan").click(function (e){
            $(".clothSpan").each(function (index){
                $(this).removeClass("active")
            })
            console.log($(this).attr("value"));
            currClothSize=$(this).attr("value");
            $(this).addClass("active");
        })
    })

    function  addCollect(){
        var requestPath = "/home/collect/add";
        $.post(requestPath,{"goodsId":goodsId,"userId":userId} ,function (res) {
            layer.msg(res.msg, {icon: 1, time: 1500});
        });
    }

    function addCart(goodsId) {
        console.log("当前添加购物车商品：", goodsId);
        console.log("当前添加购物车商品数量：", $("#number").val());
        let number = $("#number").val();
        if (!userId || userId == '' || userId == 'null' || userId == 'undefined') {
            layer.msg("请先登录！", {icon: 2, time: 1500}, function () {
                window.location.href = "/home/login";
            });
            return false;
        }
        if (number > 99) {
            layer.msg("最大订购99件！", {icon: 2, time: 1500});
            $("#number").val(99);
            return false;
        }
        if (!currClothSize) {
            layer.msg("请选择尺码！", {icon: 2, time: 1500});
            return false;
        }

        $.ajax({
            url: "/home/cart/add",
            type: "post",
            data: {"userId": userId, "goodsId": goodsId, "number": number,"clothSize":currClothSize},
            processData: true,
            contentType: 'application/x-www-form-urlencoded',
            beforeSend: function () {
                //返回的参数item，即为当前的input DOM对象
                index = layer.load(1, {shade: [0.3, 'grey']});
            },
            success: function (res) {
                //关闭遮罩层
                layer.close(index);
                if (res.success == true) {
                    layer.msg(res.msg, {icon: 1, time: 1500}, function () {
                        window.location.href = "/home/cart/detail?userId=" + userId
                    });
                } else {
                    layer.msg(res.msg, {icon: 2, time: 1500});
                }
            },
            error: function (res) {
                layer.msg(res, {icon: 2, time: 1500});
            },
            complete: function () {
            }
        });
    }

    function immediateOrder(goodsId) {
        console.log("当前立即购买商品数量：", $("#number").val());
        console.log("当前租赁截止日期：", $("#rentDay").val());

        console.log("当前立即购买是否需要发货：", $("#ifSend").is(':checked'));
        var ifSendVal=$("#ifSend").is(':checked')?1:0;
        console.log("当前立即购买是否需要发货：", ifSendVal);
        let number = $("#number").val();
        let rentDay = $("#rentDay").val();
        if(!rentDay){
            return layer.msg("请选择截止日期！", {icon: 2, time: 1500});
        }
        if (number > 99) {
            layer.msg("最大订购99件！", {icon: 2, time: 1500});
            $("#number").val(99);
            return false;
        }
        if (!currClothSize) {
            layer.msg("请选择尺码！", {icon: 2, time: 1500});
            return false;
        }
        if (!userId || userId == '' || userId == 'null' || userId == 'undefined') {
            layer.msg("请先登录！", {icon: 2, time: 1500}, function () {
                window.location.href = "/home/login";
            });
            return false;
        }
        window.location.href="/home/order/immediateOrderPage?goodsId="+goodsId+"&number="+number+"&ifSend="+ifSendVal+"&clothSize="+currClothSize+"&rentDay="+rentDay;
    }


</script>

</body>

</html>
